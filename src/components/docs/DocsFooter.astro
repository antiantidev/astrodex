---
import { SITE_CONFIG } from '../../site.config';

interface Props {
  project: string;
  contributors: { username: string; role: string; avatar: string; link: string }[];
  extraCount: number;
  prevDoc: any;
  nextDoc: any;
  getDocLink: (doc: any) => string;
}

const { project, contributors, extraCount, prevDoc, nextDoc, getDocLink } = Astro.props;
---

<!-- Contributors Section -->
<div class="mt-16 py-8 border-t border-border-subtle">
  <h4 class="text-[10px] font-bold uppercase tracking-[0.2em] text-text-dim mb-6 flex items-center gap-2">
      <i class="fa-solid fa-users text-[10px] opacity-40"></i> Contributors
  </h4>
  <div class="flex flex-wrap gap-3 md:gap-4">
      {contributors.map(c => (
          <a href={c.link} target="_blank" rel="noopener noreferrer" class="flex items-center gap-3 bg-white/[0.02] border border-border-muted pr-4 rounded-full pl-1 py-1 group hover:border-white/30 transition-all">
              <img src={c.avatar} alt={c.username} class="w-7 h-7 md:w-8 md:h-8 rounded-full border border-border-muted group-hover:border-white/50 transition-all" />
              <div class="flex flex-col">
                  <span class="text-[9px] md:text-[10px] font-bold text-text-muted group-hover:text-white transition-colors">{c.username}</span>
                  <span class="text-[7px] md:text-[8px] font-medium text-text-dim uppercase tracking-widest">{project}</span>
              </div>
          </a>
      ))}
      
      {extraCount > 0 && (
          <div class="flex items-center justify-center px-4 rounded-full bg-white/5 border border-border-muted text-[10px] font-bold text-text-dim">
              +{extraCount}
          </div>
      )}

      <a href={`${SITE_CONFIG.links.github}/blob/main/src/content/docs/${project}/project.metadata.md`} target="_blank" class="flex items-center justify-center w-9 h-9 md:w-10 md:h-10 rounded-full border border-dashed border-border-muted text-text-dim hover:border-white hover:text-white transition-all" title="Edit Metadata">
          <i class="fa-solid fa-plus text-xs"></i>
      </a>
  </div>
</div>

<!-- Pagination -->
<div class="mt-12 grid grid-cols-1 sm:grid-cols-2 gap-4 border-t border-border-subtle pt-12">
  {prevDoc && (
    <a href={getDocLink(prevDoc)} class="group p-5 md:p-6 rounded-2xl border border-border-muted bg-white/[0.02] hover:bg-white/[0.02] hover:border-white/20 transition-all">
      <div class="text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-text-dim mb-2 flex items-center gap-2">
        <i class="fa-solid fa-arrow-left text-[9px]"></i> Previous
      </div>
      <div class="text-sm font-bold text-text-main group-hover:text-white transition-colors line-clamp-1">{prevDoc.data.title}</div>
    </a>
  )}
  {nextDoc && (
    <a href={getDocLink(nextDoc)} class="group p-5 md:p-6 rounded-2xl border border-border-muted bg-white/[0.02] hover:bg-white/[0.02] hover:border-white/20 transition-all text-right flex flex-col items-end">
      <div class="text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-text-dim mb-2 flex items-center gap-2">
        Next <i class="fa-solid fa-arrow-right text-[9px]"></i>
      </div>
      <div class="text-sm font-bold text-text-main group-hover:text-white transition-colors line-clamp-1">{nextDoc.data.title}</div>
    </a>
  )}
</div>