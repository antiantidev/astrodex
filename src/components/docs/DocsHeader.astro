---
import Breadcrumbs from '../common/Breadcrumbs.astro';

interface Props {
  project: string;
  version: string;
  title: string;
  description?: string;
  status: string;
  readingTime: string;
  headings: any[];
}

const { project, version, title, description, status, readingTime, headings } = Astro.props;

const breadcrumbItems = [
  { label: 'Docs', href: '/docs', icon: 'fa-solid fa-house' },
  { label: project.replace("-", " "), href: `/docs/${project}`, icon: 'fa-solid fa-folder-open' },
  { label: version, isActive: true }
];
---

<header class="mb-10 md:mb-14 lg:mb-16 border-b border-border-subtle pb-10 md:pb-14 lg:pb-16">
  <Breadcrumbs items={breadcrumbItems} className="mb-6 md:mb-8" />

  <div class="flex flex-wrap items-center gap-3 md:gap-4 mb-6 md:mb-8">
    <span class={`text-[9px] md:text-[10px] font-bold uppercase tracking-widest px-2 md:px-2.5 py-1 rounded-full border flex items-center gap-2 ${
      status === 'stable' ? 'bg-emerald-500/10 border-emerald-500/20 text-emerald-400' :
      status === 'beta' ? 'bg-primary-500/10 border-primary-500/20 text-primary-400' :
      'bg-white/5 border-border-muted text-text-dim'
    }`}>
      <i class={`fa-solid ${status === 'stable' ? 'fa-circle-check' : 'fa-circle-dot'} text-[8px]`}></i>
      {status}
    </span>
    <span class="text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-text-dim flex items-center gap-2">
      <i class="fa-regular fa-clock text-[10px]"></i>
      {readingTime}
    </span>
  </div>

  <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold text-text-main mb-6 md:mb-8 tracking-tight leading-[1.1]">
    {title}
  </h1>

  {description && (
    <p class="text-base md:text-lg lg:text-xl text-text-muted leading-relaxed font-medium">
      {description}
    </p>
  )}

  <!-- Modern Sticky Table of Contents for Mobile -->
  {headings && headings.length > 0 && (
    <div class="xl:hidden mt-10">
      <div class="sticky top-0 z-50 bg-midnight/80 backdrop-blur-xl border border-border-muted rounded-2xl shadow-2xl">
        <button 
          id="mobile-toc-trigger"
          class="w-full flex items-center justify-between px-5 py-4 text-[10px] font-black uppercase tracking-widest text-primary-400"
        >
          <span class="flex items-center gap-3">
            <i class="fa-solid fa-list-ul"></i>
            Table of Contents
          </span>
          <i class="fa-solid fa-chevron-down transition-transform duration-300" id="mobile-toc-icon"></i>
        </button>
        <nav id="mobile-toc-menu" class="hidden px-5 pb-6 pt-2 border-t border-border-muted max-h-[50vh] overflow-y-auto">
          <ul class="space-y-4">
            {headings.map(h => (
              <li style={`padding-left: ${(h.depth - 2) * 0.75}rem`}>
                <a href={`#${h.slug}`} class="mobile-toc-link flex items-center gap-3 text-xs font-bold text-text-muted hover:text-white transition-all py-1">
                  <span class="w-1 h-1 rounded-full bg-surface-high marker-dot"></span>
                  {h.text}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      </div>
    </div>
  )}
</header>